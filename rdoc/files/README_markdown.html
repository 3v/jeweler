<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>File: README.markdown [jeweler]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='.././rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='file' id='wrapper'>
      <div class='header'>
        <h1 class='name'>README.markdown</h1>
        <div class='paths'>
          README.markdown
        </div>
        <div class='last-update'>
          Last Update:
          <span class='datetime'>Thu Dec 18 03:24:50 -0500 2008</span>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            # Jeweler: Let us craft you the perfect gem
            </p>
            <p>
            Rubygems are the awesome way of distributing your code to others. GitHub is
            the awesome way of managing the source code of your project. GitHub can
            even generate a Rubygem if you include a gemspec.
            </p>
            <p>
            Trouble is when developing your Rubygems on GitHub, you generally do one of
            the following:
            </p>
            <pre>* Manage the gemspec by hand&#x000A; * ... why bother doing something by hand when you can automate it?&#x000A;* Write your own Rake stuff to create the Gem::Specification and output it to a gemspec file, and deal with keeping the Rakefile and gemspec in sync&#x000A; * ... why keep reinventing the wheel?&#x000A;* Use hoe or echoe for generating the gemspec&#x000A; * ... why use utilities made for the days before GitHub existed?&#x000A; * ... why have extra stuff you aren't going to use?</pre>
            <p>
            <a href="../classes/Jeweler.html">Jeweler</a> was created with a few goals
            in mind:
            </p>
            <pre>* Only use a Gem::Specification as configuration&#x000A;* Be one command away from version bumping and releasing&#x000A;* Store version information in one place&#x000A;* Only concern itself with git, gems, and versioning&#x000A;* Not be a requirement for using your Rakefile (you just wouldn't be able to use its tasks)&#x000A;* Use Jeweler internally. Oh the meta!</pre>
            <p>
            ## Installation
            </p>
            <p>
            Run the following if you haven&#8217;t already:
            </p>
            <pre>gem sources -a http://gems.github.com</pre>
            <p>
            Install the gem:
            </p>
            <pre>sudo gem install technicalpickles-jeweler</pre>
            <p>
            ## Configuration for an existing project
            </p>
            <p>
            Armed with the gem, we can begin diving into an example.
            [the-perfect-gem](<a
            href="http://github.com/technicalpickles/the-perfect-gem/tree">github.com/technicalpickles/the-perfect-gem/tree</a>)
            was setup as a <a href="../classes/Jeweler.html">Jeweler</a> showcase, and
            a simple example:
            </p>
            <pre>begin&#x000A;  require 'jeweler'&#x000A;  Jeweler::Tasks.new do |s|&#x000A;    s.name = &quot;the-perfect-gem&quot;&#x000A;    s.summary = &quot;TODO&quot;&#x000A;    s.email = &quot;josh@technicalpickles.com&quot;&#x000A;    s.homepage = &quot;http://github.com/technicalpickles/the-perfect-gem&quot;&#x000A;    s.description = &quot;TODO&quot;&#x000A;    s.authors = [&quot;Josh Nichols&quot;]&#x000A;  end&#x000A;rescue LoadError&#x000A;  puts &quot;Jeweler not available. Install it with: sudo gem install technicalpickles-jeweler -s http://gems.github.com&quot;&#x000A;end</pre>
            <p>
            Here&#8217;s a rundown of what&#8217;s happening:
            </p>
            <pre>* Wrap everything in a begin block, and rescue from LoadError&#x000A; * This lets us degrade gracefully if jeweler isn't installed&#x000A;* Make a new `Jeweler::Tasks`&#x000A;  * It gets yielded a new `Gem::Specification`&#x000A;  * This is where all the configuration happens&#x000A;   * Things you definitely need to specify:&#x000A;     * `name`&#x000A;   * Things you probably want to specify:&#x000A;     * `summary`&#x000A;     * `email`&#x000A;     * `homepage`&#x000A;     * `description`&#x000A;     * `authors`&#x000A;   * Things you can specify, but have defaults&#x000A;    * `files`, defaults to `FileList[&quot;[A-Z]*.*&quot;, &quot;{bin,generators,lib,test,spec}/**/*&quot;]`&#x000A;   * Things you shouldn't specify:&#x000A;    * `version`, because Jeweler takes care of this for you&#x000A;   * Other things of interest&#x000A;    * `executables`, if you have any scripts&#x000A;    * `add_dependency`, if you have any dependencies&#x000A;   * Keep in mind that this is a `Gem::Specification`, so you can do whatever you would need to do to get your gem in shape</pre>
            <p>
            ## Bootstrap a new project
            </p>
            <p>
            Before proceeding, take a minute to setup your git environment,
            specifically your name, email address, and GitHub username
            </p>
            <pre>$ git config --global user.email johndoe@example.com&#x000A;$ git config --global user.name 'John Doe'&#x000A;$ git config --global github.user johndoe&#x000A;$ git config --global github.token 55555555555555</pre>
            <p>
            <a href="../classes/Jeweler.html">Jeweler</a> provides a generator of
            sorts, `jeweler`. It requires only argument, the name of a repo you want to
            create. It also takes a few options: &#8212;[shoulda](<a
            href="http://github.com/thoughtbot/shoulda">github.com/thoughtbot/shoulda</a>)
            and &#8212;[bacon](<a
            href="http://github.com/chneukirchen/bacon/tree/master">github.com/chneukirchen/bacon/tree/master</a>).
            These control what type of tests are created, with the default being
            shoulda.
            </p>
            <pre>$ jeweler --create-repo the-perfect-gem</pre>
            <p>
            Basically, this does:
            </p>
            <pre>* Creates the the-perfect-gem directory&#x000A;* Seeds it with some basic files:&#x000A; * `.gitignore`, with the usual suspects predefined&#x000A; * `Rakefile`, setup with tasks for jeweler, test, rdoc, and rcov&#x000A; * `README`, with your project name&#x000A; * `LICENSE`, MIT, with your name prefilled&#x000A; * `test/test_helper`, setup with shoulda, mocha, and a re-opened `Test::Unit::TestCase`&#x000A; * `test/the_perfect_gem.rb`, placeholder failing test&#x000A; * `lib/the_perfect_gem.rb`, placeholder library file&#x000A;* Makes it a git repo&#x000A;* Sets up `git@github.com:johndoe/jeweler.git` as the `origin` git remote&#x000A;* Makes an initial commit&#x000A;* Sets up a new repository on GitHub and pushes to it (omit --create-repo to skip this)</pre>
            <p>
            You also probably should [enable RubyGem creation for you repository](<a
            href="http://github.com/blog/51-github-s-rubygem-server">github.com/blog/51-github-s-rubygem-server</a>):
            Go to your project&#8217;s edit page and check the &#8216;RubyGem&#8217;
            box.
            </p>
            <p>
            ## Overview of <a href="../classes/Jeweler.html">Jeweler</a> workflow
            </p>
            <p>
            Here&#8217;s the general idea:
            </p>
            <pre>* Hack, commit, hack, commit, etc, etc&#x000A;* Version bump&#x000A;* Release&#x000A;* Have a delicious scotch</pre>
            <p>
            The hacking and the scotch are up to you, but <a
            href="../classes/Jeweler.html">Jeweler</a> provides rake tasks for the
            rest.
            </p>
            <p>
            ### Versioning
            </p>
            <p>
            Versioning information is stored in `VERSION.yml`. It&#8217;s a plain
            ol&#8217; YAML file which contains three things:
            </p>
            <pre>* major&#x000A;* minor&#x000A;* patch</pre>
            <p>
            Consider, for a second, `1.5.3`.
            </p>
            <pre>* major = 1&#x000A;* minor = 5&#x000A;* patch = 3</pre>
            <p>
            #### Your first time
            </p>
            <p>
            When you first start using <a href="../classes/Jeweler.html">Jeweler</a>,
            there won&#8217;t be a `VERSION.yml`, so it&#8217;ll assume 0.0.0.
            </p>
            <p>
            If you need some arbitrary version, you can do one of the following:
            </p>
            <pre>* `rake version:write MAJOR=6 MINOR=0 PATCH=3`&#x000A;* Write `VERSION.yml` by hand (lame)</pre>
            <p>
            #### After that
            </p>
            <p>
            You have a few rake tasks for doing the version bump:
            </p>
            <pre>$ rake version:bump:patch # 1.5.1 -&gt; 1.5.2&#x000A;$ rake version:bump:minor # 1.5.1 -&gt; 1.6.0&#x000A;$ rake version:bump:major # 1.5.1 -&gt; 2.0.0</pre>
            <p>
            If you need to do an arbitrary bump, use the same task you used to create
            `VERSION.yml`:
            </p>
            <pre>$ rake version:write MAJOR=6 MINOR=0 PATCH=3</pre>
            <p>
            The process of version bumping does a commit to your repo, so make sure
            your repo is in a clean state (ie nothing uncommitted).
            </p>
            <p>
            ### Release it
            </p>
            <p>
            It&#8217;s pretty straight forward:
            </p>
            <pre>$ rake release</pre>
            <p>
            This takes care of:
            </p>
            <pre>* Generating a `.gemspec` for you project, with the version you just bumped to&#x000A;* Commit and push the updated `.gemspec`&#x000A;* Create a tag&#x000A;* Push the tag</pre>
            <p>
            ### Play the waiting game
            </p>
            <p>
            How do you know when your gem is built? [Has My Gem Built Yet](<a
            href="http://hasmygembuiltyet.org/">hasmygembuiltyet.org/</a>) was
            specifically designed to answer that question.
            </p>
            <p>
            If it happens to be down, you can also check out the GitHub Gem
            repo&#8217;s [list](<a
            href="http://gems.github.com/list">gems.github.com/list</a>). Just search
            for youname-yourrepo.s
            </p>
            <p>
            ### Putting it all together
            </p>
            <pre>&lt;hack, hack, hack, commit&gt;&#x000A;$ rake version:bump:patch release</pre>
            <p>
            Now browse to <a
            href="http://gems.github.com/yourname/yourproject">gems.github.com/yourname/yourproject</a>,
            and wait for it to be built.
            </p>
          </div>
          <div id='section'>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
